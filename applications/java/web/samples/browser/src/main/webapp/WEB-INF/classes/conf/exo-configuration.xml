<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration>
  <component>
    <key>org.exoplatform.services.command.impl.CommandService</key>
    <type>org.exoplatform.services.command.impl.CommandService</type>
    <component-plugins>
      <component-plugin>
          <name>config.catalog</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.command.impl.CommonsXMLConfigurationPlugin</type>
          <init-params>
            <value-param>
              <name>config-file</name>
              <value>custom-commands.xml</value>
            </value-param>
          </init-params>
      </component-plugin>
    </component-plugins>
  </component>

  <component>
    <key>org.exoplatform.services.log.LogConfigurationInitializer</key>
    <type>org.exoplatform.services.log.LogConfigurationInitializer</type>
    <init-params>

      <value-param>
        <name>logger</name>
        <value>org.exoplatform.services.log.impl.BufferedSimpleLog</value>
      </value-param>
      <value-param>
        <name>configurator</name>
        <value>org.exoplatform.services.log.impl.SimpleLogConfigurator</value>
      </value-param>
      <properties-param>
        <name>properties</name>
        <description>SimpleLog properties</description>
        <property name="org.apache.commons.logging.simplelog.defaultlog" value="info"/>
        <property name="org.apache.commons.logging.simplelog.showdatetime" value="true"/>
      </properties-param>


    </init-params>
  </component>

  <component>
    <key>org.exoplatform.services.cache.CacheService</key>
    <type>org.exoplatform.services.cache.impl.CacheServiceImpl</type>
    <init-params>
      <object-param>
        <name>cache.config.default</name>
        <description>The default cache configuration</description>
        <object type="org.exoplatform.services.cache.ExoCacheConfig">
          <field  name="name"><string>default</string></field>
          <field  name="maxSize"><int>100</int></field>
          <field  name="liveTime"><long>300</long></field>
          <field  name="distributed"><boolean>false</boolean></field>
        </object>
      </object-param>
    </init-params>
  </component>
  <component>
   <key>org.exoplatform.services.idgenerator.IDGeneratorService</key>
   <type>org.exoplatform.services.idgenerator.impl.IDGeneratorServiceImpl</type>
  </component>
  <component>
    <key>org.exoplatform.services.jcr.RepositoryService</key>
    <type>org.exoplatform.services.jcr.impl.RepositoryServiceImpl</type>
  </component>
  <component>
    <key>org.exoplatform.services.jcr.config.RepositoryServiceConfiguration</key>
    <type>org.exoplatform.services.jcr.impl.config.RepositoryServiceConfigurationImpl</type>
    <init-params>
      <value-param>
        <name>conf-path</name>
        <description>JCR configuration file</description>
        <value>jar:/conf/standalone/exo-jcr-config.xml</value>
      </value-param>
    </init-params>
  </component>
  <component>
    <type>org.exoplatform.services.jcr.impl.mock.DummyOrganizationService</type>
  </component>
  <component>
    <key>org.exoplatform.services.security.SecurityService</key>
    <type>org.exoplatform.services.security.impl.SecurityServiceImpl</type>
    <init-params>
      <value-param>
        <name>security.authentication</name>
        <value>standalone</value>
      </value-param>
    </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.log.LogService</key>
    <type>org.exoplatform.services.log.impl.LogServiceImpl</type>
    <!--Valid value: FATAL, ERROR, WARN, INFO, DEBUG, TRACE-->
      <init-params>
                   <properties-param>
                     <name>log.level.config</name>
                     <property name="org.exoplatform.services.log" value="INFO"/>
                   </properties-param>
      </init-params>
  </component>
  <component>
    <key>org.exoplatform.services.document.DocumentReaderService</key>
    <type>org.exoplatform.services.document.impl.DocumentReaderServiceImpl</type>
    <component-plugins>
      <component-plugin>
        <name>pdf.document.reader</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.PDFDocumentReader</type>
        <description>to read  the pdf inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.types</name>
            <description>description</description>
            <value>application/pdf</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>document.readerMSWord</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.MSWordDocumentReader</type>
        <description>to read  the ms word inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesMSWord</name>
            <description>description</description>
            <value>application/msword</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>document.readerMSExcel</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.MSExcelDocumentReader</type>
        <description>to read  the ms excel inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesMSExcel</name>
            <description>description</description>
            <value>application/excel</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>PPTdocument.reader</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.PPTDocumentReader</type>
        <description>to read  the ms ppt inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesPPT</name>
            <description>description</description>
            <value>application/ppt</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>TPdocument.reader</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.TextPlainDocumentReader</type>
        <description>to read  the plain text inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesTextPlain</name>
            <description>description</description>
            <value>text/plain</value>
          </values-param>
        </init-params>
      </component-plugin>

      <component-plugin>
        <name>document.readerHTML</name>
        <set-method>addDocumentReader</set-method>
        <type>org.exoplatform.services.document.impl.HTMLDocumentReader</type>
        <description>to read  the html inputstream</description>
        <init-params>
          <values-param>
            <name>document.known.typesHTML</name>
            <description>description</description>
            <value>text/html</value>
          </values-param>
        </init-params>
      </component-plugin>

    </component-plugins>
  </component>

  <component>
    <key>org.exoplatform.services.naming.InitialContextInitializer</key>
    <type>org.exoplatform.services.naming.InitialContextInitializer</type>
    <component-plugins>
      <component-plugin>
        <name>bind.datasource</name>
        <set-method>addPlugin</set-method>
        <type>org.exoplatform.services.naming.BindReferencePlugin</type>
        <init-params>
          <value-param>
            <name>bind-name</name>
            <value>jdbcjcr</value>
          </value-param>
          <value-param>
            <name>class-name</name>
            <value>javax.sql.DataSource</value>
          </value-param>
          <value-param>
            <name>factory</name>
            <value>org.apache.commons.dbcp.BasicDataSourceFactory</value>
          </value-param>
          <properties-param>
            <name>ref-addresses</name>
            <description>ref-addresses</description>
            <property name="driverClassName" value="org.hsqldb.jdbcDriver"/>
            <property name="url" value="jdbc:hsqldb:file:../temp/data/exodb"/>
            <property name="username" value="sa"/>
            <property name="password" value=""/>
          </properties-param>
        </init-params>
      </component-plugin>
      <component-plugin>
        <name>bind.jcr</name>
        <set-method>addPlugin</set-method>
        <type>org.exoplatform.services.naming.BindReferencePlugin</type>
        <init-params>
          <value-param>
            <name>bind-name</name>
            <value>repository</value>
          </value-param>
          <value-param>
            <name>class-name</name>
            <value>javax.jcr.Repository</value>
          </value-param>
          <value-param>
            <name>factory</name>
            <value>org.exoplatform.services.jcr.impl.jndi.BindableRepositoryFactory</value>
          </value-param>
          <properties-param>
            <name>ref-addresses</name>
            <description>ref-addresses</description>
            <property name="repositoryName" value="repository"/>
            <!-- property name="containerConfig" value="exo-configuration.xml"/ -->
          </properties-param>
        </init-params>
       </component-plugin>
       <!-- Comment this tag if u are using Oracle AS -->
       <component-plugin>
        <name>rmi.jcr</name>
        <set-method>addPlugin</set-method>
        <type>org.exoplatform.services.naming.BindReferencePlugin</type>
        <init-params>
          <value-param>
            <name>bind-name</name>
            <value>rmirepository</value>
          </value-param>
          <value-param>
            <name>class-name</name>
            <value>javax.jcr.Repository</value>
          </value-param>
          <value-param>
            <name>factory</name>
            <value>org.exoplatform.services.jcr.rmi.api.client.ClientRepositoryFactory</value>
          </value-param>
          <properties-param>
            <name>ref-addresses</name>
            <description>ref-addresses</description>
            <property name="url" value="//localhost:9999/repository"/>
          </properties-param>
        </init-params>
       </component-plugin>
    </component-plugins>
    <init-params>
      <properties-param>
        <name>default-properties</name>
        <description>Default initial context properties</description>
        <property name="java.naming.factory.initial" value="org.exoplatform.services.naming.SimpleContextFactory"/>
      </properties-param>
      <!-- properties-param>
        <name>mandatory-properties</name>
        <description>Mandatory initial context properties</description>
        <property name="java.naming.factory.initial" value="org.exoplatform.services.naming.SimpleContextFactory"/>
        <property name="java.naming.provider.url" value="rmi://localhost:9999"/>
      </properties-param -->
    </init-params>
  </component>

  <component>
    <key>org.exoplatform.services.database.jdbc.DBSchemaCreator</key>
    <type>org.exoplatform.services.database.jdbc.DBSchemaCreator</type>
    <component-plugins>
      <component-plugin>
          <name>jcr.dbschema</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.database.jdbc.CreateDBSchemaPlugin</type>
          <init-params>
            <value-param>
              <name>data-source</name>
              <value>jdbcjcr</value>
            </value-param>
            <value-param>
              <name>script-file</name>
              <value>conf/storage/jcr-sjdbc.sql</value>
            </value-param>
          </init-params>
      </component-plugin>
    </component-plugins>
  </component>

  <component>
        <key>org.exoplatform.services.webdav.WebDavServiceImpl</key>
        <type>org.exoplatform.services.webdav.WebDavServiceImpl</type>
        <init-params>
            <!--<value-param>
                <name>default-identity</name>
                <value>admin:admin</value>
            </value-param>-->
            <value-param>
                <name>auth-header</name>
                <value>Basic realm="eXo-Platform Webdav Server"</value>
            </value-param>
            <value-param>
                <name>auto-mix-lockable</name>
                <value></value>
            </value-param>
            <value-param>
                <name>def-folder-node-type</name>
                <value>nt:folder</value>
            </value-param>
            <value-param>
                <name>def-file-node-type</name>
                <value>nt:file</value>
            </value-param>
            <value-param>
                <name>def-file-mimetype</name>
                <value>text/plain</value>
            </value-param>
            <value-param>
                <name>catalog-name</name>
                <value>WEBDAV</value>
            </value-param>
            <value-param>
                <name>repository-name</name>
                <value>repository</value>
            </value-param>
            <value-param>
                <name>update-policy</name>
                <value>create-version</value>
                <!--value>replace</value -->
                <!-- value>add</value -->
            </value-param>
        </init-params>
  </component>

  <component>
		<key>org.exoplatform.services.ftp.FtpServiceImpl</key>
		<type>org.exoplatform.services.ftp.FtpServiceImpl</type>
		<init-params>

			<value-param>
				<name>command-port</name>
				<value>21</value>
			</value-param>

			<value-param>
				<name>data-min-port</name>
				<value>52000</value>
			</value-param>

			<value-param>
				<name>data-max-port</name>
				<value>53000</value>
			</value-param>

			<value-param>
				<name>system</name>
				<!-- value>Windows_NT</value -->
				<value>UNIX Type: L8</value>
			</value-param>

			<value-param>
				<name>client-side-encoding</name>
				<value>windows-1251</value>
				<!-- value>KOI8-R</value -->
			</value-param>

			<value-param>
				<name>def-folder-node-type</name>
				<value>nt:folder</value>
			</value-param>

			<value-param>
				<name>def-file-node-type</name>
				<value>nt:file</value>
			</value-param>

			<value-param>
				<name>def-file-mime-type</name>
				<value>application/zip</value>
			</value-param>

			<value-param>
				<name>cache-folder-name</name>
				<value>../temp/ftp_cache</value>
			</value-param>

			<!-- bytes per second -->
			<!-- value-param>
			<name>upload-speed-limit</name>
			<value>20480</value>
			</value-param -->

			<!-- bytes per second -->
			<!-- value-param>
			<name>download-speed-limit</name>
			<value>20480</value>
			</value-param -->

			<!-- seconds -->
			<!-- value-param>
			<name>timeout</name>
			<value>60</value>
			</value-param -->

		</init-params>
  </component>

  <component>
    <key>org.exoplatform.services.transaction.TransactionService</key>
    <type>org.exoplatform.services.transaction.impl.jotm.TransactionServiceJotmImpl</type>
    <init-params>
      <value-param>
        <name>timeout</name>
        <value>5</value>
      </value-param>
    </init-params>
  </component>
<component>
        <type>org.exoplatform.services.jcr.impl.ext.action.SessionActionCatalog</type>
        <component-plugins>
          <component-plugin>
            <name>addActions</name>
            <set-method>addPlugin</set-method>
            <type>org.exoplatform.services.jcr.impl.ext.action.AddActionsPlugin</type>
            <description>add actions plugin</description>
            <init-params>
              <object-param>
                <name>actions</name>
                <object type="org.exoplatform.services.jcr.impl.ext.action.AddActionsPlugin$ActionsConfig">
                  <field  name="actions">
                    <collection type="java.util.ArrayList">
                      <value>
                        <object type="org.exoplatform.services.jcr.impl.ext.action.ActionConfiguration">
                          <field  name="eventTypes"><string>addProperty,changeProperty</string></field>
                          <!--<field  name="path"><string>/test</string></field>-->
                          <!--<field  name="isDeep"><boolean>true</boolean></field>-->
                          <!--<field  name="nodeType"><string>nt:base</string></field>-->
                          <field  name="parentNodeType"><string>nt:resource</string></field>
                          <!-- field  name="workspace"><string>production</string></field -->
                          <field  name="actionClassName"><string>org.exoplatform.services.jcr.ext.metadata.AddMetadataAction</string></field>
                        </object>
                      </value>
                    </collection>
                  </field>
                </object>
              </object-param>
            </init-params>
          </component-plugin>

        </component-plugins>

  </component>

  <component>
        <key>org.exoplatform.services.jcr.ext.audit.AuditService</key>
        <type>org.exoplatform.services.jcr.ext.audit.AuditServiceImpl</type>
  </component>

  <external-component-plugins>
      <target-component>org.exoplatform.services.jcr.impl.ext.action.SessionActionCatalog</target-component>
      <component-plugin>
          <name>addActions</name>
          <set-method>addPlugin</set-method>
          <type>org.exoplatform.services.jcr.impl.ext.action.AddActionsPlugin</type>
          <description>add actions plugin</description>
          <init-params>
            <object-param>
              <name>actions</name>
              <object type="org.exoplatform.services.jcr.impl.ext.action.AddActionsPlugin$ActionsConfig">
                <field  name="actions">
                  <collection type="java.util.ArrayList">
                    <value>
                      <object type="org.exoplatform.services.jcr.impl.ext.action.ActionConfiguration">
                        <field  name="eventTypes"><string>addProperty,changeProperty,removeProperty</string></field>
                        <field  name="path"><string>/</string></field>
                        <field  name="parentNodeType"><string>exo:auditable</string></field>
                        <field  name="isDeep"><boolean>true</boolean></field>
                        <field  name="actionClassName"><string>org.exoplatform.services.jcr.ext.audit.AuditAction</string></field>
                      </object>
                    </value>
                    <value>
                      <object type="org.exoplatform.services.jcr.impl.ext.action.ActionConfiguration">
                        <field  name="eventTypes"><string>addMixin</string></field>
                        <field  name="path"><string>/</string></field>
                        <field  name="nodeType"><string>exo:auditable</string></field>
                        <field  name="isDeep"><boolean>true</boolean></field>
                        <field  name="actionClassName"><string>org.exoplatform.services.jcr.ext.audit.AuditAction</string></field>
                      </object>
                    </value>
                  </collection>
                </field>
              </object>
            </object-param>
          </init-params>
        </component-plugin>
    </external-component-plugins>
    <external-component-plugins>
		      <target-component>org.exoplatform.services.jcr.RepositoryService</target-component>
		      <component-plugin>
		        <name>add.namespaces</name>
		        <set-method>addPlugin</set-method>
		        <type>org.exoplatform.services.jcr.impl.AddNamespacesPlugin</type>
		        <init-params>
		          <properties-param>
		            <name>namespaces</name>
		            <property name="dc" value="http://purl.org/dc/elements/1.1/"/>
		          </properties-param>
		        </init-params>
		      </component-plugin>
		      <component-plugin>
		        <name>add.nodeType</name>
		        <set-method>addPlugin</set-method>
		        <type>org.exoplatform.services.jcr.impl.AddNodeTypePlugin</type>
		        <init-params>
		          <values-param>
		            <name>nodeTypesFiles</name>
		            <description>Node types configuration file</description>
		            <value>jar:/conf/ext-nodetypes-config.xml</value>
		          </values-param>
		        </init-params>
		      </component-plugin>
    </external-component-plugins>
</configuration>
